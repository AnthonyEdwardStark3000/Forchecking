"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.sgTransport = void 0;
const mail_1 = __importDefault(require("@sendgrid/mail"));
const package_json_1 = __importDefault(require("../package.json"));
class SendgridTransport {
    constructor(options) {
        this.name = package_json_1.default.name;
        this.version = package_json_1.default.version;
        this.options = options;
    }
    send({ data }, callback) {
        mail_1.default.setApiKey(this.options.auth.apiKey);
        const sendMultiple = Array.isArray(data.to);
        mail_1.default.send(data, sendMultiple)
            .then((res) => { callback(null, res); })
            .catch((err) => { callback(err); });
    }
}
const sgTransport = (options) => new SendgridTransport(options);
exports.sgTransport = sgTransport;
//# sourceMappingURL=index.js.map