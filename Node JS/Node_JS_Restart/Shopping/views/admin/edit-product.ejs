<%-include('../includes/start.ejs')%>
    <link rel="stylesheet" href="/css/product.css" />
    <link rel="stylesheet" href="/css/main.css" />
  </head>
  <body>
    <%-include('../includes/navigation.ejs')%>
    <main>
        <%if(errorMessage){%>
        <div class="user-message user-message--error">
          <%=errorMessage%>
        </div>
        <%}%>
      <form class="product-form" action="/admin/<%if(editing){%>edit-product<% }else{%>add-product<%}%>" method="POST" enctype="multipart/form-data">
        <div class="form-control">
          <label for="title">Title</label>
          <input
            type="text"
            placeholder="Add a product"
            name="title"
            id="title"
            class="<%=validationErrors.find(e=>e.param === 'title')?'invalid':''%>"
            value="<%if(editing||hasError){%><%=product.title%><%}%>"
          />
        </div>
        <div class="form-control">
          <label for="image">Image</label>
          <input
            type="file"
            placeholder="Add the URL"
            name="image"
            id="image"
          />
        </div>
        <!-- <div class="form-control">
          <label for="title">Image URL</label>
          <input
            type="text"
            placeholder="Add the URL"
            name="imageUrl"
            id="imageUrl"
            class="<%=validationErrors.find(e=>e.param === 'imageUrl')?'invalid':''%>"
            value="<%if(editing||hasError){%><%=product.imageUrl%><%}%>"
          />
        </div> -->
        <div class="form-control">
          <label for="price">Price</label>
          <input
            type="number"
            placeholder="Enter the price amount"
            name="price"
            id="price"
            step="0.01"
            class="<%=validationErrors.find(e=>e.param === 'price')?'invalid':''%>"
            value="<%if(editing||hasError){%><%=product.price%><%}%>"
          />
        </div>
        <div class="form-control">
                <label for="description">Description</label>
                <textarea name="description" id="description" rows="5" class="<%=validationErrors.find(e=>e.param === 'description')?'invalid':''%>"><% if (editing||hasError) { %><%= product.description %><% } %></textarea>
            </div>
        <% if(editing){ %>
          <input type="hidden" name="productId" value="<%=product._id %>">
        <% } %>
        <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
        <button type="submit"><%if(editing||hasError){%> Update Product <% }else{ %>Add Product<%} %></button>
      </form>
    </main>
  </body>
  </html>
